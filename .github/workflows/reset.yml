name: Hard Reset

on:
  workflow_dispatch:

jobs:
  reset:
    runs-on: ubuntu-20.04
    steps:
      - name: Clean Disk
        run: |
          echo "强制清理 /home/runner 缓存..."
          # 这是关键：清理 runner 自己的工作区，而不是碰不到的 docker 目录
          sudo rm -rf /home/runner/actions-runner/_work/*/*
          
          # 清理用户缓存
          rm -rf ~/.npm ~/.cache ~/.gradle ~/.m2 2>/dev/null || true
          
          echo "清理完成，当前状态："
          df -hT
      - name: Break to Exit
        run: exit 1
